name: Notify by Email on Release

on:
  push:
    branches:
      - main
  release:
    types: [published]   # Trigger when a new release is published

jobs:
  send_email:
    runs-on: ubuntu-latest

    steps:
    - name: Send Email Notification
      uses: dawidd6/action-send-mail@v3
      with:
        # Gmail SMTP configuration
        server_address: smtp.gmail.com
        server_port: 465
        username: ${{ secrets.MAIL_USERNAME }}
        password: ${{ secrets.MAIL_PASSWORD }}

        # Email details
        subject: "ðŸš€ New Release: ${{ github.event.release.tag_name }}"
        to: ${{ secrets.MAIL_USERNAME }}       # Recipient (can be same as sender)
        from: GitHub Release Bot <${{ secrets.MAIL_USERNAME }}>
        body: |
          ðŸ“¦ **New GitHub Release Notification**

          Repository: ${{ github.repository }}
          Release Tag: ${{ github.event.release.tag_name }}
          Published At: ${{ github.event.release.published_at }}
          Release Name: ${{ github.event.release.name }}
          Release Notes:
          ${{ github.event.release.body }}

          ðŸ”— View release details:
          ${{ github.event.release.html_url }}
